name morphir
bin morphir
version "0.2.0"
about "CLI for working with Morphir IR - functional domain modeling and business logic"
usage "Usage: morphir [OPTIONS] [COMMAND]"
flag --help-all help="Print help including experimental commands"
flag "-V --version" help="Print version"
cmd compile help="Compile source code to Morphir IR" {
    flag "-l --language" help="Source language (e.g., gleam, elm)" {
        arg <LANGUAGE>
    }
    flag "-i --input" help="Input source directory or file" {
        arg <INPUT>
    }
    flag "-o --output" help="Output directory" {
        arg <OUTPUT>
    }
    flag --package-name help="Package name override" {
        arg <PACKAGE_NAME>
    }
    flag --config help="Explicit config file path" {
        arg <CONFIG>
    }
    flag --project help="Project name (for workspaces)" {
        arg <PROJECT>
    }
    flag --json help="Output as JSON"
    flag --json-lines help="Output as JSON Lines (streaming)"
}
cmd generate help="Generate code from Morphir IR" {
    flag "-t --target" help="Target language or format" {
        arg <TARGET>
    }
    flag "-i --input" help="Path to the Morphir IR file or directory" {
        arg <INPUT>
    }
    flag "-o --output" help="Output directory" {
        arg <OUTPUT>
    }
    flag --config help="Explicit config file path" {
        arg <CONFIG>
    }
    flag --project help="Project name (for workspaces)" {
        arg <PROJECT>
    }
    flag --json help="Output as JSON"
    flag --json-lines help="Output as JSON Lines (streaming)"
}
cmd validate hide=#true help="[Experimental] Validate Morphir IR models" {
    flag "-i --input" help="Path to the Morphir IR file or directory" {
        arg <INPUT>
    }
}
cmd transform hide=#true help="[Experimental] Transform Morphir IR" {
    flag "-i --input" help="Path to the Morphir IR file or directory" {
        arg <INPUT>
    }
    flag "-o --output" help="Output path" {
        arg <OUTPUT>
    }
}
cmd tool subcommand_required=#true help="Manage Morphir tools, distributions, and extensions" {
    cmd install help="Install a Morphir tool or extension" {
        flag "-v --version" help="Version to install (defaults to latest)" {
            arg <VERSION>
        }
        arg <NAME> help="Name of the tool to install"
    }
    cmd list help="List installed Morphir tools"
    cmd update help="Update an installed Morphir tool" {
        flag "-v --version" help="Version to update to (defaults to latest)" {
            arg <VERSION>
        }
        arg <NAME> help="Name of the tool to update"
    }
    cmd uninstall help="Uninstall a Morphir tool" {
        arg <NAME> help="Name of the tool to uninstall"
    }
}
cmd dist subcommand_required=#true help="Manage Morphir distributions" {
    cmd install help="Install a Morphir distribution" {
        flag "-v --version" help="Version to install (defaults to latest)" {
            arg <VERSION>
        }
        arg <NAME> help="Name of the distribution to install"
    }
    cmd list help="List installed Morphir distributions"
    cmd update help="Update an installed Morphir distribution" {
        flag "-v --version" help="Version to update to (defaults to latest)" {
            arg <VERSION>
        }
        arg <NAME> help="Name of the distribution to update"
    }
    cmd uninstall help="Uninstall a Morphir distribution" {
        arg <NAME> help="Name of the distribution to uninstall"
    }
}
cmd extension subcommand_required=#true help="Manage Morphir extensions" {
    cmd install help="Install a Morphir extension" {
        flag "-v --version" help="Version to install (defaults to latest)" {
            arg <VERSION>
        }
        arg <NAME> help="Name of the extension to install"
    }
    cmd list help="List installed Morphir extensions"
    cmd update help="Update an installed Morphir extension" {
        flag "-v --version" help="Version to update to (defaults to latest)" {
            arg <VERSION>
        }
        arg <NAME> help="Name of the extension to update"
    }
    cmd uninstall help="Uninstall a Morphir extension" {
        arg <NAME> help="Name of the extension to uninstall"
    }
}
cmd ir subcommand_required=#true help="Manage Morphir IR" {
    cmd migrate help="Migrate IR between versions" {
        long_help "Migrate IR between versions\n\nConverts Morphir IR between Classic (V1-V3) and V4 formats. Supports local files, URLs, and GitHub shorthand sources.\n\n**Examples:**\n\n```bash\n# Migrate to file\nmorphir ir migrate ./morphir-ir.json -o ./morphir-ir-v4.json --target-version v4\n\n# Migrate from URL\nmorphir ir migrate https://lcr-interactive.finos.org/server/morphir-ir.json -o ./lcr-v4.json\n\n# Display in console with syntax highlighting (no -o)\nmorphir ir migrate ./morphir-ir.json\n\n# Downgrade V4 to Classic\nmorphir ir migrate ./morphir-ir-v4.json -o ./morphir-ir-classic.json --target-version classic\n```\n\nSee the [IR Migration Guide](/ir-migrate/) for detailed real-world examples including the US Federal Reserve FR 2052a regulation model."
        flag "-o --output" help="Output file or directory (if omitted, displays in console with syntax highlighting)" {
            arg <OUTPUT>
        }
        flag --target-version help="Target version: latest, v4/4, classic, v3/3, v2/2, v1/1 (default: latest)" default=latest {
            arg <TARGET_VERSION>
        }
        flag --force-refresh help="Force refresh cached remote sources"
        flag --no-cache help="Skip cache entirely for remote sources"
        flag --json help="Output result as JSON (for scripting)"
        flag --expanded help="Use expanded (non-compact) format for V4 output"
        arg <INPUT> help="Input file, directory, or remote source (e.g., github:owner/repo, URL)"
    }
}
cmd gleam subcommand_required=#true help="Gleam language binding commands" {
    flag --json help="Output as JSON"
    flag --json-lines help="Output as JSON Lines (streaming)"
    cmd compile help="Compile Gleam source to Morphir IR" {
        flag "-i --input" help="Input source directory or file" {
            arg <INPUT>
        }
        flag "-o --output" help="Output directory" {
            arg <OUTPUT>
        }
        flag --package-name help="Package name override" {
            arg <PACKAGE_NAME>
        }
        flag --config help="Explicit config file path" {
            arg <CONFIG>
        }
        flag --project help="Project name (for workspaces)" {
            arg <PROJECT>
        }
    }
    cmd generate help="Generate Gleam code from Morphir IR" {
        flag "-i --input" help="Path to the Morphir IR file or directory" {
            arg <INPUT>
        }
        flag "-o --output" help="Output directory" {
            arg <OUTPUT>
        }
        flag --config help="Explicit config file path" {
            arg <CONFIG>
        }
        flag --project help="Project name (for workspaces)" {
            arg <PROJECT>
        }
    }
    cmd roundtrip help="Roundtrip: compile then generate (for testing)" {
        flag "-i --input" help="Input source directory or file" {
            arg <INPUT>
        }
        flag "-o --output" help="Output directory" {
            arg <OUTPUT>
        }
        flag --package-name help="Package name override" {
            arg <PACKAGE_NAME>
        }
        flag --config help="Explicit config file path" {
            arg <CONFIG>
        }
        flag --project help="Project name (for workspaces)" {
            arg <PROJECT>
        }
    }
}
cmd schema help="Generate JSON Schema for Morphir IR" {
    flag "-o --output" help="Output file path (optional)" {
        arg <OUTPUT>
    }
}
cmd version help="Print version information" {
    flag --json help="Output version info as JSON"
}
cmd usage hide=#true help="Output usage spec for documentation generation"

